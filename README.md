# 🛒 基於行為數據與心理學的 AI 電商行銷 Agent
# AI E-commerce Marketing Agent based on Behavioral Data & Psychology

這是一個結合 **資料分析 (Data Analytics)** 與 **生成式 AI (GenAI)** 的智慧行銷專案。
本程式能夠讀取消費者的行為數據（CSV），自動判讀其心理狀態，並針對不同客群撰寫出具有高度說服力的廣告文案。

## 📂 專案檔案 (Project Files)

- **📄 [點擊查看完整分析報告 (PDF)](AI_agent - Colab.pdf)**
---

## 🚀 專案核心架構 (Core Architecture)

本專案將行銷邏輯拆解為以下 **四大核心模組**：

### 1. Agent 的大腦：策略知識庫 (`STRATEGY_BANK`)
這是 Agent 的智慧來源。我們將《消費者購物阻礙及策略》的行銷理論轉化為 Python 的字典結構。

* **功能**：定義了 **7 種** 不同的消費者情境（如購物車遺棄、深夜滑手機、重複瀏覽等）。
* **內容**：每一種情境都包含三個關鍵指引：
    * `insight` (心理洞察)：告訴 AI 消費者現在在想什麼（例如：現在偏誤、選擇麻痺）。
    * `tactic` (策略戰術)：告訴 AI 該用什麼手段（例如：創造焦慮感、提供社會認同）。
    * `example` (參考金句)：提供範例讓小模型模仿。

### 2. Agent 的眼睛：感知與預處理 (Perception Layer)
在進入核心思考前，程式碼先對原始資料進行了「特徵工程」，讓 Agent 能看懂更深層的資訊。

* **計算重複瀏覽 (`view_count`)**：
    * 程式碼使用 `df.groupby(...).transform(...)` 預先計算了每個用戶對特定商品的瀏覽次數。
    * **目的**：這讓 Agent 能夠辨識出「猶豫不決」的客人（看超過 3 次）。
* **解析時間 (`hour`)**：
    * 將 `event_time` 轉換為小時。
    * **目的**：抓出 **23:00 ~ 04:00** 的「深夜客群」，觸發感性行銷。
* **解析商品屬性**：
    * 辨識 **價格**（區分中價位比價 vs 高價位怕後悔）。
    * 辨識 **類別**（抓出服飾 `apparel` / 鞋類 `shoes` 來處理尺寸焦慮）。

### 3. Agent 的邏輯：決策優先級 (Decision Tree)
這是整個程式最聰明的地方。它不是隨機選擇策略，而是根據**「購買訊號強弱」**設定了嚴格的優先順序（Priority）：

1. **🛒 購物車遺棄 (Cart Abandonment)**：訊號最強，優先級最高 (Top Priority)。只要有放購物車沒買，直接催單。
2. **👀 重複瀏覽 (Repetitive View)**：訊號次強。代表用戶很想要但卡住了，需要社會認同來推一把。
3. **🌙 深夜滑手機 (Late Night)**：生理狀態特徵。利用深夜腦波弱的特點進行感性訴求。
4. **👕/💎 商品特徵 (Attribute)**：當上述行為都沒有時，才根據商品屬性（怕尺寸不合、怕買貴）來進行溝通。
5. **💰 比價 (Price Comparison)**：針對中高價位商品的通用策略。

### 4. Agent 的嘴巴：生成控制 (`run_agent` & LLM)
這部分解決了小模型（1.5B）容易「句點」或「只說你好」的問題。

* **Prompt 工程 (Prompt Engineering)**：
    * 採用 **「填空題」** 模式，指令改為 `請直接輸出改寫後的廣告文案`，並明確禁止打招呼。
    * 將動態數據（商品名、價格）與靜態策略（心理學原理）融合在提示詞中。
* **強制生成參數 (Generation Parameters)**：
    * `min_new_tokens=30`：這是關鍵修正！強制模型至少要寫滿 30 個 token，確保它不會只吐出兩個字就停機。
    * `do_sample=True` 與 `temperature=0.85`：賦予模型適度的隨機性與創意，讓文案不會死板。

---

## 🎯 總結：這隻程式碼解決了什麼問題？

傳統的行銷自動化通常只能做「如果你買了 A，就推薦 B」。

但這隻 Agent 程式碼做到了 **「心理層面的個人化」**：

* 它知道你 **深夜不睡覺**，所以叫你對自己好一點。
* 它知道你 **看了這雙鞋 5 次**，所以告訴你大家都買這雙。
* 它知道你 **買不起 1000 美金的手機** 怕後悔，所以跟你強調退貨保證。

這就是結合了 **Kaggle 行為數據** 與 **行為經濟學策略** 的強大成果！
